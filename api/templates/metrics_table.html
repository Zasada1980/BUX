<table id="tbl">
    <thead>
        <tr>
            <th>Kind</th>
            <th class="numeric">Count</th>
            <th class="numeric">Error %</th>
            <th class="numeric">Idem %</th>
            <th class="numeric">p50 (ms)</th>
            <th class="numeric">p95 (ms)</th>
            <th>Last Event</th>
        </tr>
    </thead>
    <tbody>
        {% if rows %}
            {% for row in rows %}
            <tr>
                <td><code>{{ row.kind }}</code></td>
                <td class="numeric">{{ row.count }}</td>
                <td class="numeric {% if row.error_rate > 0.1 %}error-high{% else %}error-low{% endif %}">
                    {{ (row.error_rate * 100) | round(1) }}%
                </td>
                <td class="numeric">{{ (row.idempotent_rate * 100) | round(1) }}%</td>
                <td class="numeric">{{ row.p50_ms if row.p50_ms is not none else '-' }}</td>
                <td class="numeric">{{ row.p95_ms if row.p95_ms is not none else '-' }}</td>
                <td style="font-size: 12px; color: #6c757d;">
                    {{ row.last_ts[-8:] if row.last_ts else '-' }}
                </td>
            </tr>
            {% endfor %}
        {% else %}
            <tr>
                <td colspan="7" class="no-data">
                    ðŸ“­ No metrics data for selected window
                </td>
            </tr>
        {% endif %}
    </tbody>
</table>
